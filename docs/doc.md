# tinydbpp 文档

1. Pager
  - 功能: 实现了一个基于文件的页式储存系统, 给定一个文件, 如果不存在则自动创建, 可以得到一个Pager对象, 通过Pager对象
    可以访问某个页. 实现了页缓存, 当缓存已满的时候, 采用FIFO页替换算法.
  - 基本参数
    - 页大小 4096B
    - Cache 大小 10K页

1. Record Manager

1. BTree
  - 功能: 实现了一个基于 RecordManager 的 B+ 树, B+ 树的关键码类型为模板参数, 可以由用户编译时指定,
    B+ 树的数据为 Location 结构体, 即指向文件某个地址的指针.
  - 由于 B+ 树不允许有重复关键码, 而数据库索引可以有重复, 基于 B+ 树又实现了一个带重复关键码的 B+ 树.
    实现方式是在 B+ 树的数据 Location 指向的地址保存一个 Location 数组, Location 数组这条记录是
    变长数据, 所以可以对应多条记录. 添加, 删除都相当于原 B+ 树的更新操作, 根据关键码查找的操作应该先根据关键码
    查找 Location 数组, 再遍历 Location 数组, 找到这条记录.

1. GUI
  采用 QT 实现, 将 tinydbpp 作为静态库和 QT 实现的 GUI 程序一起链接, tinydbpp 提供执行 SQL 语句的接口, 返回值为 JSON.
  QT 这边解析 JSON 根据执行不同的语句选择是显示成表格, 还是显示提示信息.

1. 模糊查询 LIKE 关键字
  实现方法: 首先将查询关键字中非字符, 数字, '%'和'_'的其他符号前面全部加一个 '\' 转移符, 再将 '\_' 替换成 '.',
  将 '%' 替换成 '.*', 接下来用 C++ 的 regex 库进行正则表达式匹配.
